/*
 showMeScales 2016-08-10 
*/
var Notes=function(){function a(a){for(var d=b[f].slice(0),e=c[f].slice(0),i=0;i<a;i++){var j=d.shift();d.push(j);var k=e.shift();e.push(k)}return g=d,h=e,{names:h,classes:g}}var b=[["A","As","B","C","Cs","D","Ds","E","F","Fs","G","Gs"],["A","Bf","B","C","Df","D","Ef","E","F","Gf","G","Af"]],c=[["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],["A","Bb","B","C","Db","D","Eb","E","F","Gb","G","Ab"]],d=["1","b9","2","m3","M3","4","b5","5","#5","6","m7","M7"],e=[MinorScale={name:"Minor",intervals:[0,2,1,2,2,1,2,2]},MajorScale={name:"Major",intervals:[0,2,2,1,2,2,2,1]},Ionian={name:"Ionian",intervals:[0,2,2,1,2,2,2,1]},Dorian={name:"Dorian",intervals:[0,2,1,2,2,2,1,2]},Phrygian={name:"Phrygian",intervals:[0,1,2,2,2,1,2,2]},Lydian={name:"Lydian",intervals:[0,2,2,2,1,2,2,1]},Mixolydian={name:"Mixolydian",intervals:[0,2,2,1,2,2,1,2]},Aeolian={name:"Aeolian",intervals:[0,2,1,2,2,1,2,2]},Locrian={name:"Locrian",intervals:[0,1,2,2,1,2,2,2]},HarmonicMinor={name:"Harmonic Minor",intervals:[0,2,1,2,2,1,3,1]},HarmonicMajor={name:"Harmonic Major",intervals:[0,2,2,1,2,1,3,2]},MelodicMinor={name:"Melodic Minor",intervals:[0,2,1,2,2,2,2,1]},MelodicMajor={name:"Melodic Major",intervals:[0,2,2,1,2,1,2,2]},PentatonicMinor={name:"Pentatonic Minor",intervals:[0,3,2,2,3,2]},PentatonicMajor={name:"Pentatonic Major",intervals:[0,2,2,3,2,3]},PentatonicMinor={name:"Pentatonic Minor",intervals:[0,3,2,2,3,2]},Blues={name:"Blues Mode",intervals:[0,3,2,1,1,2,3]},BluesMajor={name:"Blues Major",intervals:[0,2,1,1,3,2,3]},BluesMinor={name:"Blues Minor",intervals:[0,3,2,1,1,3,2]},Diminished={name:"Diminished",intervals:[0,2,1,2,1,2,1,2,1]},Augmented={name:"Augmented",intervals:[0,3,1,3,1,3,1]},WholeTone={name:"Whole Tone",intervals:[0,2,2,2,2,2,2]}],f=0,g=[],h=[],i=[];THE_EMBELLISHMENTS=[];var j=function(){return c[f]},k=function(){for(var a=[],b=0;b<e.length;b++)a.push(e[b].name);return a},l=function(a){return e[a].intervals},m=function(b){return a(b)},n=function(a){var b=0;i=[];for(var c=0;c<a.length-1;c++)b+=a[c],i.push(g[b]);return i},o=function(a){var b=0;THE_EMBELLISHMENTS=[];for(var c=0;c<a.length-1;c++)b+=a[c],THE_EMBELLISHMENTS.push(d[b]);return THE_EMBELLISHMENTS};return{getNotes:j,getScaleName:k,getScaleIntervals:l,getScale:n,getEmbellishments:o,getNotesFromTonic:m}}(),Instrument=function(){function a(a){var c=a,d=document.createElement("div"),e=[],f=[];j.push(d);for(var h=0;h<c.strings.length;h++){var k=document.createElement("div"),l=Notes.getNotesFromTonic(c.strings[h]);k.className="strings",e=l.names,f=l.classes;for(var m=0;m<c.number;m++){i++,i>f.length-1&&b();var n=document.createElement("div");if(n.className="note "+f[i],0!==h){var o=document.createElement("p");o.innerHTML=e[i],n.appendChild(o)}k.appendChild(n)}b(),null===d.firstChild?d.appendChild(k):d.insertBefore(k,d.firstChild)}for(var p=0;p<c.inlays;p++){var q=document.createElement("div");q.className="inlays",d.appendChild(q),d.insertBefore(q,d.firstChild)}c.class?d.className="fretboard fretboard__"+c.class:d.className="fretboard fretboard__"+c.name,g.appendChild(d)}function b(){return i=0}function c(a,b){for(;h.firstChild;)h.removeChild(h.firstChild);if(""!==b)for(var c=0;c<a.length;c++){var d=document.createElement("p");d.innerHTML=a[c];var e=document.createElement("span");e.innerHTML=b[c],d.appendChild(e),h.appendChild(d)}}function d(a){var b,c,d=g.querySelectorAll(".note--tonic"),f=g.querySelectorAll(".note--highlighted");for(b=d.length;b--;)e(d[b],"note--tonic");for(c=f.length;c--;)e(f[c],"note--highlighted");for(var h=0;h<a.length;h++){var i,j=a[h],k=g.querySelectorAll("."+j);i=0!==h?" note--highlighted":" note--tonic";for(var l=0;l<k.length;l++)k[l].className+=i}}function e(a,b){if(f(a,b)){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ")}}function f(a,b){return!!a.className&&a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))}var g=document.querySelector(".instruments"),h=document.querySelector(".info"),i=0,j=[],k=function(b){var c=b;a(c)},l=function(a){d(a)},m=function(a){var b=g.querySelector(".fretboard--active");if(null!==b){b.className+=" fretboard--no-more-active",e(b,"fretboard--active");var c=g.querySelector(".fretboard--no-more-active");setTimeout(function(){e(c,"fretboard--no-more-active")},500)}j[a].className+=" fretboard--active"};return{show:m,draw:k,drawNotes:l,showInfo:c}}(),showMeScalesApp=function(){function a(a){Instrument.draw(g[a])}var b,c="",d="",e="",f="",g=[Guitar={name:"guitar",strings:[0,7,0,5,10,2,7],number:22,inlays:10},Guitar={name:"guitar 7 strings",class:"guitar fretboard__guitar--seven",strings:[0,2,7,0,5,10,2,7],number:22,inlays:10},Bass_5_strings={name:"bass",strings:[0,7,0,5,10,0],number:20,inlays:9},Bass_4_strings={name:"Bass 4 Strings",class:"bass fretboard__bass--four",strings:[0,7,0,5,0],number:20,inlays:9},Ukulele={name:"ukulele",strings:[0,10,3,7,0],number:15,inlays:6},Banjo={name:"banjo",strings:[0,10,5,10,2,5],number:22,inlays:10}],h=function(){for(var b=[],c=0;c<g.length;c++)b.push(g[c].name),a(c);return b},i=function(a){void 0===b&&Draggable.dragIt(),b=a,Instrument.show(b)},j=function(a,b){function g(){var a=Notes.getScaleIntervals(d);e=Notes.getScale(a),f=Notes.getEmbellishments(a)}var h=a;h===!0?(c=b,e=Notes.getNotesFromTonic(c).classes[0],""!==d&&g()):(d=b,g()),Instrument.showInfo(e,f),Instrument.drawNotes(e)},k=function(){return Notes.getNotes()},l=function(){return Notes.getScaleName()};return{instruments:g,drawNotes:j,showInstrument:i,getInstrument:h,getNotes:k,getScaleName:l}}(),Select=function(){function a(a,c,d){var e=document.createElement("div"),f=document.createElement("p"),i=document.createElement("span"),j=document.createElement("ul");switch(f.innerHTML=a,i.innerHTML=a,i.addEventListener("click",function(a){var b=a.target.className,c=document.querySelector("ul."+b);c.className+=" options--active",h.className="scrollable-Options"}),j.className="options "+c,c){case"scales":i.innerHTML="scales",i.className="scales ",e.className="selection__boxes scales";break;case"notes":i.innerHTML="notes",i.className="notes ",e.className="selection__boxes notes";break;case"playinginstrument":i.innerHTML="instrument",i.className="playinginstrument",e.className="selection__boxes selection__boxes--active playinginstrument"}for(var k=0;k<d.length;k++){var l=document.createElement("li");l.innerHTML=d[k],b(l,k,c,d[k]),j.appendChild(l)}e.appendChild(f),e.appendChild(i),h.appendChild(j),g.appendChild(e)}function b(a,b,f,g){var i=a,j=b,k=f,l=g;i.addEventListener("click",function(){var a=document.querySelector(".options--active");switch(a.className="",a.className="options "+k,k){case"scales":e(j,l);break;case"notes":d(j,l);break;case"playinginstrument":c(j,l)}h.className=""})}function c(a,b){if(""===j){var c=document.querySelector(".selection__boxes.playinginstrument p");c.innerHTML="on ";var d=document.querySelector(".selection__boxes.notes");d.className="selection__boxes selection__boxes--active notes";var e=document.querySelector(".instruments");e.className+=" instruments--active",g.className+=" selected"}var f=document.querySelector(".selection__boxes.playinginstrument span");f.innerHTML=b,j=a,showMeScalesApp.showInstrument(a)}function d(a,b){if(""===k){var c=g.querySelector(".selection__boxes.notes p");c.innerHTML="of tonic";var d=g.querySelector(".selection__boxes.scales.scales");d.className="selection__boxes selection__boxes--active scales"}var e=document.querySelector(".selection__boxes.notes span");e.innerHTML=b,k=a,showMeScalesApp.drawNotes(!0,k)}function e(a,b){""===l&&(g.className+=" selection--hide",i.className+=" bt--show");var c=document.querySelector(".selection__boxes.scales span");c.innerHTML=b,l=a,showMeScalesApp.drawNotes(!1,a)}function f(){i.className="bt",i.innerHTML="<p>‚ùÆ</p>",i.addEventListener("click",function(){"bt bt--show"===i.className?(i.className="bt bt--hide",g.className="selection"):(i.className="bt bt--show",g.className="selection selection--hide")}),h.appendChild(i)}var g=document.querySelector(".selection"),h=document.querySelector("body"),i=document.createElement("div"),j="",k="",l="";a("Show me the","scales",showMeScalesApp.getScaleName()),a("Show me tonic","notes",showMeScalesApp.getNotes()),a("Show me the","playinginstrument",showMeScalesApp.getInstrument()),f()}(),Draggable=function(){function a(a){j=i-h.offsetLeft}function b(a){i=document.all?window.event.clientX:a.pageX,null!==h&&m()>0&&(k=i-j,k>0&&(k=0),k<=m()*-1&&(k=m()*-1),h.style.left=k+"px")}function c(){document.removeEventListener("mousemove",b)}function d(){document.addEventListener("mousemove",b),g!==document.querySelector(".fretboard--active")&&(h=document.querySelector(".fretboard--active"),g=h,e())}function e(){h.addEventListener("mousedown",function(){return a(this),!1})}function f(){document.addEventListener("mouseup",c),document.addEventListener("mousedown",d)}var g,h=null,i=0,j=0,k=0,l=document.querySelector(".body"),m=function(){return h.offsetWidth-l.offsetWidth};return{dragIt:f}}();